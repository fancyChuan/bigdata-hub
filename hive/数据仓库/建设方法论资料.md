

[数据仓库建模方法论](https://wenku.baidu.com/view/00b2513e03d8ce2f00662372.html)


### 数仓分层

ODS层作用
- 作为业务系统的缓冲，保证后续的
- 存历史数据，能追溯
- 企业最重要的数据资产
- 能快速响应业务需求（不轻易使用）
- 能够支持业务系统本身进行数据监控、数据修复
- 多源业务数据，具有多样性
- （非结构化转结构化）

ODS层问题
- 存储（量大） =》 冷备、TTL、压缩、增量存储、拉链、存binlog+全量镜像
- 上游变更 => 监控、ddl变更、建流程机制
- 口径未封装
- dump及时性的问题	=> 数据糊

ODS层管理
- 分数据的系统来源（数据的划分可以按部门、分析实习、系统、业务过程）
  - 按系统分，比较稳定。好处：
    - 消费测：好认
    - 生产测：更方便跟业务系统做沟通（提效），统一规范

DWD作用
- 清洗转换
- 口径统一，屏蔽上游变更
- 整合（重定义）
- 明细
- 面向分析而生的

DWD问题
- 快速响应的问题。	=>  抽象出行业解决方案
- 加工成本
- 上游变更会有影响   => 流程上，加入干预节点
- 口径的维护 => 
  - 工具：数据地图coral、指标平台
  - 通用型口径的封装，以及模型

DWD管理
- 按主题域划分（业务过程也要考虑）
  - 主题的要求：稳定、不重复不遗漏（一致性）、易于理解、扩展
  - 原子指标=动作+度量
  - 生产要素=参与实体+业务环节
  - 三类：toB   toC  toM（管理），很多公司会按这几类分开来建数仓


